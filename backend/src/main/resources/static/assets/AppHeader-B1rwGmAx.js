import{_ as F,Z as H,b0 as x,b1 as I,b2 as S,aj as T,p as U,R as d,z as b,e as p,w as e,h as s,d as z,K as L,f as o,F as f,a9 as V,a4 as j,v as C,l as K,aa as M,ab as P,x as Z,b3 as q,u as G,c as h,b4 as D,aE as u,az as J,aI as R}from"./index-B2T-xuoP.js";/* empty css                         *//* empty css                  */const O={name:"AppHeader",components:{User:U,HomeFilled:T,SwitchButton:S,ArrowDown:I,Right:x,ChatDotRound:H},setup(){const a=G(),n=h(()=>D.value!==null),g=h(()=>D.value),l=h(()=>{const t=u.value;return{student:"学生",teacher:"教师",admin:"管理员"}[t]||""}),w=()=>{a.push("/")},_=()=>{a.push("/forum")},i=t=>{if(t==="logout")m();else if(t==="profile"){const r=u.value;r?a.push(`/${r}/profile`):(console.error("无法确定用户角色以跳转到个人中心"),a.push("/"))}else t==="dashboard"?u.value==="student"?a.push("/student"):u.value==="teacher"?a.push("/teacher"):u.value==="admin"?a.push("/admin/notice"):a.push("/"):t==="forum"&&_()},m=async()=>{try{await R(),a.push("/login")}catch(t){console.error("登出时出错:",t),R(),a.push("/login")}};return{isLoggedIn:n,userName:g,userRoleName:l,userAvatar:J,goToHome:w,goToForum:_,handleCommand:i}}},Q={class:"header-user"},W={class:"user-greeting"},X={class:"welcome-message"},Y={class:"user-avatar"};function $(a,n,g,l,w,_){const i=j,m=d("ArrowDown"),t=K,r=d("HomeFilled"),c=P,v=d("ChatDotRound"),A=d("User"),E=d("SwitchButton"),N=M,k=V,B=Z,y=q;return p(),b(y,{class:"app-header"},{default:e(()=>[n[5]||(n[5]=s("div",{class:"header-logo"},[s("h1",null,"智慧化校园服务系统")],-1)),s("div",Q,[l.isLoggedIn?(p(),z(L,{key:0},[s("div",W,[s("span",X,f(l.userName)+" ("+f(l.userRoleName)+"), 欢迎您!",1)]),o(k,{trigger:"click",onCommand:l.handleCommand},{dropdown:e(()=>[o(N,null,{default:e(()=>[o(c,{command:"dashboard"},{default:e(()=>[o(t,null,{default:e(()=>[o(r)]),_:1}),n[0]||(n[0]=s("span",null,"工作台",-1))]),_:1}),o(c,{command:"forum"},{default:e(()=>[o(t,null,{default:e(()=>[o(v)]),_:1}),n[1]||(n[1]=s("span",null,"校园论坛",-1))]),_:1}),o(c,{command:"profile"},{default:e(()=>[o(t,null,{default:e(()=>[o(A)]),_:1}),n[2]||(n[2]=s("span",null,"个人资料",-1))]),_:1}),o(c,{command:"logout",divided:""},{default:e(()=>[o(t,null,{default:e(()=>[o(E)]),_:1}),n[3]||(n[3]=s("span",null,"退出登录",-1))]),_:1})]),_:1})]),default:e(()=>[s("div",Y,[o(i,{size:36,src:l.userAvatar},{default:e(()=>[C(f(l.userName.substring(0,1).toUpperCase()),1)]),_:1},8,["src"]),o(t,{class:"dropdown-icon"},{default:e(()=>[o(m)]),_:1})])]),_:1},8,["onCommand"])],64)):(p(),b(B,{key:1,type:"primary",onClick:l.goToForum},{default:e(()=>[o(t,null,{default:e(()=>[o(v)]),_:1}),n[4]||(n[4]=C(" 校园论坛 "))]),_:1},8,["onClick"]))])]),_:1})}const no=F(O,[["render",$],["__scopeId","data-v-8b86dc17"]]);export{no as A};
