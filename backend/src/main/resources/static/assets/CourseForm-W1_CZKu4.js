import{_ as x,r as p,a as U,o as q,aO as O,y as _,H as L,z as V,e as f,w as s,f as o,m as e,j as t,k as g,aP as w,T as y,U as m,d as B,K as R,L as j,i as A,P as E,n as M}from"./index-D-KotFfR.js";import{d as P}from"./common-BBGhIV1Q.js";const n={required:(d="该字段")=>({required:!0,message:`${d}不能为空`,trigger:"blur"})},h={__name:"CourseForm",props:{courseData:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},setup(d,{expose:N}){const I=d,i=p(null),l=p({id:null,courseName:"",courseNo:"",credits:null,courseType:null,description:"",collegeId:null}),F=U({courseName:[n.required("课程名称")],courseNo:[n.required("课程编号")],credits:[n.required("学分")],courseType:[n.required("课程类型")],collegeId:[n.required("所属学院")]}),c=p([]),v=p(!1),C=async()=>{v.value=!0;try{const r=await P();r.code===200&&Array.isArray(r.data)?c.value=r.data:(E.error(r.message||"获取学院列表失败"),c.value=[])}catch(r){console.error("获取学院列表失败:",r),E.error("获取学院列表时发生错误"),c.value=[]}finally{v.value=!1}};q(()=>{C()}),O(()=>I.courseData,r=>{r&&Object.keys(r).length>0?M(()=>{l.value={...r}}):b()},{immediate:!0,deep:!0});const T=()=>{var r;return(r=i.value)==null?void 0:r.validate()},b=()=>{i.value&&i.value.resetFields(),l.value={id:null,courseName:"",courseNo:"",credits:null,courseType:null,description:"",collegeId:null}};return N({validate:T,resetForm:b,getFormData:()=>l.value}),(r,u)=>{const k=L;return _((f(),V(e(A),{ref_key:"courseFormRef",ref:i,model:l.value,rules:F,"label-width":"100px"},{default:s(()=>[o(e(t),{label:"课程名称",prop:"courseName"},{default:s(()=>[o(e(g),{modelValue:l.value.courseName,"onUpdate:modelValue":u[0]||(u[0]=a=>l.value.courseName=a),placeholder:"请输入课程名称"},null,8,["modelValue"])]),_:1}),o(e(t),{label:"课程编号",prop:"courseNo"},{default:s(()=>[o(e(g),{modelValue:l.value.courseNo,"onUpdate:modelValue":u[1]||(u[1]=a=>l.value.courseNo=a),disabled:d.isEdit,placeholder:"请输入课程编号"},null,8,["modelValue","disabled"])]),_:1}),o(e(t),{label:"学分",prop:"credits"},{default:s(()=>[o(e(w),{modelValue:l.value.credits,"onUpdate:modelValue":u[2]||(u[2]=a=>l.value.credits=a),min:0,precision:1,step:.5,placeholder:"请输入学分"},null,8,["modelValue"])]),_:1}),o(e(t),{label:"课程类型",prop:"courseType"},{default:s(()=>[o(e(y),{modelValue:l.value.courseType,"onUpdate:modelValue":u[3]||(u[3]=a=>l.value.courseType=a),placeholder:"请选择课程类型"},{default:s(()=>[o(e(m),{label:"必修课",value:"COMPULSORY"}),o(e(m),{label:"选修课",value:"ELECTIVE"}),o(e(m),{label:"通识课",value:"GENERAL"})]),_:1},8,["modelValue"])]),_:1}),o(e(t),{label:"学院/部门",prop:"collegeId"},{default:s(()=>[o(e(y),{modelValue:l.value.collegeId,"onUpdate:modelValue":u[4]||(u[4]=a=>l.value.collegeId=a),loading:v.value,clearable:"",filterable:"",placeholder:"请选择所属学院"},{default:s(()=>[(f(!0),B(R,null,j(c.value,a=>(f(),V(e(m),{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),o(e(t),{label:"课程描述",prop:"description"},{default:s(()=>[o(e(g),{modelValue:l.value.description,"onUpdate:modelValue":u[5]||(u[5]=a=>l.value.description=a),rows:3,placeholder:"请输入课程描述",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[k,d.loading]])}}},z=x(h,[["__scopeId","data-v-6680efc4"]]);export{z as C};
