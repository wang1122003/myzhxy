import{_ as F,Z as H,aT as x,aU as I,aV as T,aW as U,p as S,R as d,z as C,e as p,w as e,h as s,d as V,K as z,f as o,F as f,a9 as L,a4 as q,v as D,l as K,aa as M,ab as P,x as W,aX as X,u as Y,c as h,aY as R,av as u,aq as Z,az as A}from"./index-D-KotFfR.js";/* empty css                         *//* empty css                  */const j={name:"AppHeader",components:{User:S,HomeFilled:U,SwitchButton:T,ArrowDown:I,Right:x,ChatDotRound:H},setup(){const n=Y(),t=h(()=>R.value!==null),g=h(()=>R.value),l=h(()=>{const a=u.value;return{student:"学生",teacher:"教师",admin:"管理员"}[a]||""}),w=()=>{n.push("/")},_=()=>{n.push("/forum")},i=a=>{if(a==="logout")m();else if(a==="profile"){const r=u.value;r?n.push(`/${r}/profile`):(console.error("无法确定用户角色以跳转到个人中心"),n.push("/"))}else a==="dashboard"?u.value==="student"?n.push("/student"):u.value==="teacher"?n.push("/teacher"):u.value==="admin"?n.push("/admin/notice"):n.push("/"):a==="forum"&&_()},m=async()=>{try{await A(),n.push("/login")}catch(a){console.error("登出时出错:",a),A(),n.push("/login")}};return{isLoggedIn:t,userName:g,userRoleName:l,userAvatar:Z,goToHome:w,goToForum:_,handleCommand:i}}},G={class:"header-user"},J={class:"user-greeting"},O={class:"welcome-message"},Q={class:"user-avatar"};function $(n,t,g,l,w,_){const i=q,m=d("ArrowDown"),a=K,r=d("HomeFilled"),c=P,v=d("ChatDotRound"),N=d("User"),k=d("SwitchButton"),B=M,E=L,b=W,y=X;return p(),C(y,{class:"app-header"},{default:e(()=>[t[5]||(t[5]=s("div",{class:"header-logo"},[s("h1",null,"智慧化校园服务系统")],-1)),s("div",G,[l.isLoggedIn?(p(),V(z,{key:0},[s("div",J,[s("span",O,f(l.userName)+" ("+f(l.userRoleName)+"), 欢迎您!",1)]),o(E,{trigger:"click",onCommand:l.handleCommand},{dropdown:e(()=>[o(B,null,{default:e(()=>[o(c,{command:"dashboard"},{default:e(()=>[o(a,null,{default:e(()=>[o(r)]),_:1}),t[0]||(t[0]=s("span",null,"工作台",-1))]),_:1}),o(c,{command:"forum"},{default:e(()=>[o(a,null,{default:e(()=>[o(v)]),_:1}),t[1]||(t[1]=s("span",null,"校园论坛",-1))]),_:1}),o(c,{command:"profile"},{default:e(()=>[o(a,null,{default:e(()=>[o(N)]),_:1}),t[2]||(t[2]=s("span",null,"个人资料",-1))]),_:1}),o(c,{command:"logout",divided:""},{default:e(()=>[o(a,null,{default:e(()=>[o(k)]),_:1}),t[3]||(t[3]=s("span",null,"退出登录",-1))]),_:1})]),_:1})]),default:e(()=>[s("div",Q,[o(i,{size:36,src:l.userAvatar},{default:e(()=>[D(f(l.userName.substring(0,1).toUpperCase()),1)]),_:1},8,["src"]),o(a,{class:"dropdown-icon"},{default:e(()=>[o(m)]),_:1})])]),_:1},8,["onCommand"])],64)):(p(),C(b,{key:1,type:"primary",onClick:l.goToForum},{default:e(()=>[o(a,null,{default:e(()=>[o(v)]),_:1}),t[4]||(t[4]=D(" 校园论坛 "))]),_:1},8,["onClick"]))])]),_:1})}const to=F(j,[["render",$],["__scopeId","data-v-8b86dc17"]]);export{to as A};
