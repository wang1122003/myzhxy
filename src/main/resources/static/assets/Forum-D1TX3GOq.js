import{_ as ee,aT as ie,R as ue,d as L,e as v,h as C,y as te,f as e,w as l,v as d,l as H,x as S,H as le,z,C as U,F as I,B as ae,i as J,j as A,k as Y,aR as xe,N as de,r as g,a as Q,o as oe,P as m,af as ne,V as ze,A as D,U as q,T as X,q as Ee,D as R,a2 as me,u as Fe,S as Pe,aW as Se,b as Ie,c as Ue,m as r,aY as Ne,Z as Be,aK as $,g as se,aP as De,aL as Le,K as Ae,L as Re,n as Me}from"./index-gQMZQ2sp.js";/* empty css                   */import{a as ce,u as Ke,o as qe,p as He,q as je,z as Oe,r as G,s as W,t as We,c as Ye,w as Ze}from"./zh-CN-Dc7yWMX2.js";import{T as $e,E as Ge}from"./style-ssEox-hO.js";/* empty css                   *//* empty css                 *//* empty css                        *//* empty css               *//* empty css                      *//* empty css                  */import{f as Je}from"./formatDistanceToNow-DX3kz_01.js";import"./request-DfavLRg_.js";import"./api-endpoints-Ctc2JoQP.js";const Qe={name:"CategoryManagement",components:{Plus:ie},emits:["refresh"],setup(M,{emit:a}){const F=g(!1),s=g([]),V=g(!1),y=g(!1),T=g(!1),_=g(null),f=Q({id:null,name:"",sort:0,description:"",status:1}),x={name:[{required:!0,message:"请输入板块名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],sort:[{required:!0,message:"请输入排序值",trigger:"blur"}]},h=async()=>{F.value=!0;try{const n=await ce();s.value=n.data||[]}catch(n){console.error("获取板块列表失败:",n),m.error("获取板块列表失败")}finally{F.value=!1}},u=()=>{y.value=!1,N(),V.value=!0},P=n=>{y.value=!0,N(),Object.assign(f,n),V.value=!0},E=n=>{ne.confirm(`确定要删除板块 "${n.name}" 吗？删除后该板块下的所有帖子将被移动到默认板块。`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await He(n.id),m.success("删除成功"),h(),a("refresh")}catch(k){console.error("删除板块失败:",k),m.error("删除板块失败")}}).catch(()=>{m.info("已取消删除")})},w=async()=>{_.value&&await _.value.validate(async n=>{if(n){T.value=!0;try{y.value?(await Ke(f.id,f),m.success("更新成功")):(await qe(f),m.success("添加成功")),V.value=!1,h(),a("refresh")}catch(k){console.error("保存板块失败:",k),m.error("保存失败")}finally{T.value=!1}}})},N=()=>{_.value&&_.value.resetFields(),f.id=null,f.name="",f.sort=0,f.description=""},B=n=>{if(!n)return"-";try{return new Date(n).toLocaleString("zh-CN",{hour12:!1})}catch{return n}};return oe(()=>{h()}),{loading:F,categories:s,dialogVisible:V,isEdit:y,submitting:T,categoryFormRef:_,categoryForm:f,rules:x,handleAddCategory:u,handleEditCategory:P,handleDeleteCategory:E,submitCategoryForm:w,formatTime:B}}},Xe={class:"category-management-container"},et={class:"header"},tt={class:"dialog-footer"};function lt(M,a,F,s,V,y){const T=ue("Plus"),_=H,f=S,x=U,h=ae,u=Y,P=A,E=xe,w=J,N=de,B=le;return v(),L("div",Xe,[C("div",et,[a[6]||(a[6]=C("h3",null,"板块管理",-1)),e(f,{type:"primary",onClick:s.handleAddCategory},{default:l(()=>[e(_,null,{default:l(()=>[e(T)]),_:1}),a[5]||(a[5]=d(" 添加板块 "))]),_:1},8,["onClick"])]),te((v(),z(h,{data:s.categories,border:"",style:{width:"100%"}},{default:l(()=>[e(x,{label:"板块名称","min-width":"150",prop:"name"}),e(x,{label:"排序",prop:"sort",width:"80"}),e(x,{label:"描述","min-width":"200",prop:"description","show-overflow-tooltip":""}),e(x,{label:"帖子数量",prop:"postCount",width:"100"}),e(x,{label:"创建时间",width:"180"},{default:l(n=>[d(I(s.formatTime(n.row.createTime)),1)]),_:1}),e(x,{fixed:"right",label:"操作",width:"150"},{default:l(n=>[e(f,{size:"small",type:"primary",onClick:k=>s.handleEditCategory(n.row)},{default:l(()=>a[7]||(a[7]=[d("编辑")])),_:2},1032,["onClick"]),e(f,{size:"small",type:"danger",onClick:k=>s.handleDeleteCategory(n.row)},{default:l(()=>a[8]||(a[8]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,s.loading]]),e(N,{modelValue:s.dialogVisible,"onUpdate:modelValue":a[4]||(a[4]=n=>s.dialogVisible=n),title:s.isEdit?"编辑板块":"添加板块",width:"500px"},{footer:l(()=>[C("span",tt,[e(f,{onClick:a[3]||(a[3]=n=>s.dialogVisible=!1)},{default:l(()=>a[9]||(a[9]=[d("取消")])),_:1}),e(f,{loading:s.submitting,type:"primary",onClick:s.submitCategoryForm},{default:l(()=>a[10]||(a[10]=[d("确定")])),_:1},8,["loading","onClick"])])]),default:l(()=>[e(w,{ref:"categoryFormRef",model:s.categoryForm,rules:s.rules,"label-width":"80px"},{default:l(()=>[e(P,{label:"名称",prop:"name"},{default:l(()=>[e(u,{modelValue:s.categoryForm.name,"onUpdate:modelValue":a[0]||(a[0]=n=>s.categoryForm.name=n),placeholder:"请输入板块名称"},null,8,["modelValue"])]),_:1}),e(P,{label:"排序",prop:"sort"},{default:l(()=>[e(E,{modelValue:s.categoryForm.sort,"onUpdate:modelValue":a[1]||(a[1]=n=>s.categoryForm.sort=n),max:999,min:0},null,8,["modelValue"])]),_:1}),e(P,{label:"描述",prop:"description"},{default:l(()=>[e(u,{modelValue:s.categoryForm.description,"onUpdate:modelValue":a[2]||(a[2]=n=>s.categoryForm.description=n),rows:3,placeholder:"请输入板块描述",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}const at=ee(Qe,[["render",lt],["__scopeId","data-v-531d903e"]]),ot={name:"CommentManagement",components:{Search:ze},setup(){const M=Fe(),a=g(!1),F=g([]),s=g(0),V=g(1),y=g(10),T=g(""),_=g(""),f=async()=>{a.value=!0;try{const c={page:V.value,size:y.value,status:T.value!==""?T.value:null,keyword:_.value||null},b=await je(c);F.value=b.data.list||[],s.value=b.data.total||0}catch(c){console.error("获取评论列表失败:",c),m.error("获取评论列表失败")}finally{a.value=!1}},x=c=>{if(!c)return"";const b=50;return c.length>b?c.substring(0,b)+"...":c},h=async c=>{try{await G(c.id,{status:1}),m.success("评论已通过审核"),c.status=1}catch(b){console.error("审核评论失败:",b),m.error("操作失败")}},u=c=>{ne.confirm("确定要删除此评论吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await G(c.id,{status:-1}),m.success("评论已删除"),c.status=-1}catch(b){console.error("删除评论失败:",b),m.error("删除失败")}}).catch(()=>{m.info("已取消删除")})},P=async c=>{try{await G(c.id,{status:1}),m.success("评论已恢复"),c.status=1}catch(b){console.error("恢复评论失败:",b),m.error("操作失败")}},E=c=>{c.postId?M.push(`/forum/post/${c.postId}`):m.warning("无法获取帖子信息")},w=()=>{V.value=1,f()},N=()=>{V.value=1,f()},B=c=>{y.value=c,V.value=1,f()},n=c=>{V.value=c,f()},k=c=>{if(!c)return"-";try{const b=new Date(c);return Je(b,{locale:Oe})}catch(b){return console.error("时间格式化错误:",b),c}};return oe(()=>{f()}),{loading:a,comments:F,total:s,currentPage:V,pageSize:y,filterStatus:T,searchKeyword:_,truncateContent:x,handleApproveComment:h,handleDeleteComment:u,handleRestoreComment:P,viewPost:E,handleFilterChange:w,handleSearch:N,handleSizeChange:B,handleCurrentChange:n,formatTime:k}}},nt={class:"comment-management-container"},rt={class:"header"},st={class:"filter-actions"},it={class:"comment-detail"},ut={key:0},dt={key:1},mt={key:0,class:"pagination-container"};function ct(M,a,F,s,V,y){const T=q,_=X,f=ue("Search"),x=H,h=Y,u=U,P=R,E=S,w=ae,N=me,B=le;return v(),L("div",nt,[C("div",rt,[a[4]||(a[4]=C("h3",null,"评论管理",-1)),C("div",st,[e(_,{modelValue:s.filterStatus,"onUpdate:modelValue":a[0]||(a[0]=n=>s.filterStatus=n),clearable:"",placeholder:"评论状态",onChange:s.handleFilterChange},{default:l(()=>[e(T,{label:"全部",value:""}),e(T,{value:1,label:"正常"}),e(T,{value:0,label:"待审核"}),e(T,{value:-1,label:"已删除"})]),_:1},8,["modelValue","onChange"]),e(h,{modelValue:s.searchKeyword,"onUpdate:modelValue":a[1]||(a[1]=n=>s.searchKeyword=n),clearable:"",placeholder:"搜索评论内容",style:{width:"200px","margin-left":"10px"},onKeyup:Ee(s.handleSearch,["enter"])},{suffix:l(()=>[e(x,{class:"el-input__icon",onClick:s.handleSearch},{default:l(()=>[e(f)]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeyup"])])]),te((v(),z(w,{data:s.comments,border:"",style:{width:"100%"}},{default:l(()=>[e(u,{type:"expand"},{default:l(n=>[C("div",it,[a[7]||(a[7]=C("p",null,[C("strong",null,"评论内容：")],-1)),C("p",null,I(n.row.content),1),n.row.postTitle?(v(),L("p",ut,[a[5]||(a[5]=C("strong",null,"帖子标题：",-1)),d(" "+I(n.row.postTitle),1)])):D("",!0),n.row.parentId?(v(),L("p",dt,[a[6]||(a[6]=C("strong",null,"回复对象：",-1)),d(" "+I(n.row.replyToName),1)])):D("",!0)])]),_:1}),e(u,{label:"评论内容","min-width":"200","show-overflow-tooltip":""},{default:l(n=>[d(I(s.truncateContent(n.row.content)),1)]),_:1}),e(u,{label:"发布者",prop:"authorName",width:"120"}),e(u,{label:"帖子标题","min-width":"150",prop:"postTitle","show-overflow-tooltip":""}),e(u,{label:"点赞数",prop:"likeCount",sortable:"",width:"80"}),e(u,{label:"状态",width:"100"},{default:l(n=>[n.row.status===1?(v(),z(P,{key:0,type:"success"},{default:l(()=>a[8]||(a[8]=[d("正常")])),_:1})):n.row.status===0?(v(),z(P,{key:1,type:"warning"},{default:l(()=>a[9]||(a[9]=[d("待审核")])),_:1})):n.row.status===-1?(v(),z(P,{key:2,type:"danger"},{default:l(()=>a[10]||(a[10]=[d("已删除")])),_:1})):(v(),z(P,{key:3,type:"info"},{default:l(()=>a[11]||(a[11]=[d("未知")])),_:1}))]),_:1}),e(u,{label:"发布时间",width:"180"},{default:l(n=>[d(I(s.formatTime(n.row.createTime)),1)]),_:1}),e(u,{fixed:"right",label:"操作",width:"200"},{default:l(n=>[n.row.status===0?(v(),z(E,{key:0,size:"small",type:"success",onClick:k=>s.handleApproveComment(n.row)},{default:l(()=>a[12]||(a[12]=[d(" 审核通过 ")])),_:2},1032,["onClick"])):D("",!0),n.row.status!==-1?(v(),z(E,{key:1,size:"small",type:"danger",onClick:k=>s.handleDeleteComment(n.row)},{default:l(()=>a[13]||(a[13]=[d(" 删除 ")])),_:2},1032,["onClick"])):D("",!0),n.row.status===-1?(v(),z(E,{key:2,size:"small",type:"primary",onClick:k=>s.handleRestoreComment(n.row)},{default:l(()=>a[14]||(a[14]=[d(" 恢复 ")])),_:2},1032,["onClick"])):D("",!0),e(E,{size:"small",onClick:k=>s.viewPost(n.row)},{default:l(()=>a[15]||(a[15]=[d(" 查看帖子 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,s.loading]]),s.total>0?(v(),L("div",mt,[e(N,{"current-page":s.currentPage,"onUpdate:currentPage":a[2]||(a[2]=n=>s.currentPage=n),"page-size":s.pageSize,"onUpdate:pageSize":a[3]||(a[3]=n=>s.pageSize=n),"page-sizes":[10,20,50,100],total:s.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])):D("",!0)])}const ft=ee(ot,[["render",ct],["__scopeId","data-v-2da01040"]]),pt={class:"forum-management-container"},gt={class:"page-header"},vt={class:"action-buttons"},yt={style:{padding:"10px 20px"}},wt={key:0,class:"pagination-container"},Ct={style:{border:"1px solid #ccc",width:"100%"}},_t={class:"dialog-footer"},bt={name:"ForumManagement"},ht=Object.assign(bt,{setup(M){const a=g([]),F=g(0),s=g(1),V=g(10),y=Q({keyword:"",status:null}),T=g(!1),_=g(!1),f=g(!1),x=g(null),h=g(null),u=Q({title:"",forumId:null,content:""}),P=g({title:[{required:!0,message:"请输入帖子标题",trigger:"blur"}],forumId:[{required:!0,message:"请选择板块",trigger:"change"}],content:[{required:!0,message:"请输入帖子内容",trigger:"blur"},{validator:(o,t,p)=>{const i=w.value;i&&i.isEmpty()?p(new Error("请输入帖子内容")):p()},trigger:"blur"}]}),E=g(!1),w=Pe(),N={},B={placeholder:"请输入帖子内容...",MENU_CONF:{uploadImage:{server:"/api/forum/posts/upload/image",fieldName:"file",headers:{Authorization:`Bearer ${Se()}`},customInsert(o,t){if(o.code===200&&o.data){let p=o.data;p&&!p.startsWith("http")&&!p.startsWith("/")?p=`${window.location.origin}/${p}`:p&&p.startsWith("/uploads")&&(p=`${window.location.origin}${p}`),t(p,"image",p)}else m.error(o.message||"图片上传失败")},onError(o,t,p){console.error("上传图片错误:",t,p),m.error("上传图片错误: "+((p==null?void 0:p.message)||t.message))}}}},n=o=>{w.value=o};Ie(()=>{const o=w.value;o!=null&&o.destroy()});const k=g([]),c=g(!1),b=async()=>{c.value=!0;try{const o=await ce();o.success&&Array.isArray(o.data)?k.value=o.data:Array.isArray(o)?k.value=o:(console.warn("获取板块列表返回的数据格式不符合预期:",o),k.value=[],m.warning("获取板块列表数据格式有误"))}catch(o){console.error("获取板块列表失败:",o),m.error("获取板块列表失败"),k.value=[]}finally{c.value=!1}},K=async()=>{T.value=!0;try{const o={page:s.value,size:V.value,keyword:y.keyword||void 0};y.status&&y.status.length>0&&(o.isTop=y.status.includes("isTop")?!0:void 0,o.isEssence=y.status.includes("isEssence")?!0:void 0,o.isLocked=y.status.includes("isLocked")?!0:void 0);const t=await Ze(o);t.data&&t.data.rows?(a.value=t.data.rows,F.value=t.data.total||0):(console.error("获取帖子列表响应格式错误:",t),a.value=[],F.value=0,m.error(t.message||"获取帖子列表失败"))}catch(o){console.error("获取论坛列表失败",o),m.error("获取论坛列表失败"),a.value=[],F.value=0}finally{T.value=!1}},Z=()=>{s.value=1,K()},fe=o=>{V.value=o,s.value=1,K()},pe=o=>{s.value=o,K()},ge=o=>o?o.length>100?o.substring(0,100)+"...":o:"",ve=()=>{h.value&&h.value.resetFields(),u.title="",u.forumId=null,u.content="",w.value&&w.value.setHtml(""),x.value=null,f.value=!1,E.value=!1},ye=async o=>{const t=!o.isTop;try{await W(o.id,{isTop:t}),m.success(t?"置顶成功":"取消置顶成功"),o.isTop=t}catch{m.error("操作失败")}},we=async o=>{const t=!o.isEssence;try{await W(o.id,{isEssence:t}),m.success(t?"加精成功":"取消加精成功"),o.isEssence=t}catch{m.error("操作失败")}},Ce=async o=>{const t=!o.status;try{await W(o.id,{status:t}),m.success(t?"解锁成功":"锁定成功"),o.status=t}catch{m.error("操作失败")}},_e=async o=>{f.value=!0,_.value=!0,x.value=o.id,h.value&&h.value.clearValidate(),u.title="",u.forumId=null,u.content="",w.value&&w.value.setHtml(""),await b(),_.value=!0,u.title=o.title,u.forumId=o.forumId,await Me(),w.value?w.value.setHtml(o.content||""):u.content=o.content||""},be=o=>{ne.confirm(`确定要删除帖子 "${o.title}" 吗? 这将同时删除帖子的所有回复。`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await We(o.id),m.success("删除成功"),K()}catch(t){console.error("删除帖子失败",t),m.error("删除帖子失败")}}).catch(()=>{m.info("已取消删除")})},he=()=>{f.value=!1,x.value=null,h.value&&h.value.resetFields(),u.title="",u.forumId=null,u.content="",w.value&&w.value.setHtml(""),b(),_.value=!0},re=Ue(()=>f.value?"编辑帖子":"发布新帖子"),ke=async()=>{h.value&&await h.value.validate(async o=>{if(o){E.value=!0;try{const t=w.value;if(!t)throw new Error("编辑器未初始化");const p={title:u.title,forumId:u.forumId,content:t.getHtml()};f.value&&x.value?(await W(x.value,p),m.success("帖子更新成功")):(await Ye(p),m.success("帖子发布成功")),_.value=!1,K()}catch(t){console.error("提交帖子失败",t),m.error(f.value?"更新帖子失败":"发布帖子失败")}finally{E.value=!1}}})},Ve=o=>{if(!o)return"-";try{return new Date(o).toLocaleString("zh-CN",{hour12:!1})}catch{return o}},j=g("posts"),Te=o=>{console.log("当前标签页:",o.props.name)};return oe(()=>{b(),Z()}),(o,t)=>{const p=le;return v(),L("div",pt,[C("div",gt,[t[15]||(t[15]=C("h2",null,"论坛管理",-1)),C("div",vt,[e(r(S),{type:"success",onClick:t[0]||(t[0]=i=>j.value="categories")},{default:l(()=>[e(r(H),null,{default:l(()=>[e(r(Ne))]),_:1}),t[12]||(t[12]=d(" 板块管理 "))]),_:1}),e(r(S),{type:"warning",onClick:t[1]||(t[1]=i=>j.value="comments")},{default:l(()=>[e(r(H),null,{default:l(()=>[e(r(Be))]),_:1}),t[13]||(t[13]=d(" 评论管理 "))]),_:1}),e(r(S),{type:"primary",onClick:he},{default:l(()=>[e(r(H),null,{default:l(()=>[e(r(ie))]),_:1}),t[14]||(t[14]=d(" 发布帖子 "))]),_:1})])]),e(r(Le),{modelValue:j.value,"onUpdate:modelValue":t[6]||(t[6]=i=>j.value=i),type:"border-card",onTabClick:Te},{default:l(()=>[e(r($),{label:"帖子管理",name:"posts"},{default:l(()=>[e(r(se),{class:"filter-card"},{default:l(()=>[e(r(J),{inline:!0,model:y,onSubmit:De(Z,["prevent"])},{default:l(()=>[e(r(A),{label:"关键词"},{default:l(()=>[e(r(Y),{modelValue:y.keyword,"onUpdate:modelValue":t[2]||(t[2]=i=>y.keyword=i),clearable:"",placeholder:"帖子标题/内容/作者",style:{width:"250px"}},null,8,["modelValue"])]),_:1}),e(r(A),{label:"状态"},{default:l(()=>[e(r(X),{modelValue:y.status,"onUpdate:modelValue":t[3]||(t[3]=i=>y.status=i),clearable:"","collapse-tags":"",multiple:"",placeholder:"帖子状态",style:{width:"200px"}},{default:l(()=>[e(r(q),{label:"置顶",value:"isTop"}),e(r(q),{label:"加精",value:"isEssence"}),e(r(q),{label:"锁定",value:"isLocked"})]),_:1},8,["modelValue"])]),_:1}),e(r(A),null,{default:l(()=>[e(r(S),{type:"primary",onClick:Z},{default:l(()=>t[16]||(t[16]=[d(" 查询 ")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(r(se),{class:"post-list-card"},{default:l(()=>[te((v(),z(r(ae),{data:a.value,style:{width:"100%"}},{default:l(()=>[e(r(U),{type:"expand"},{default:l(i=>[C("div",yt,[t[17]||(t[17]=C("p",null,[C("strong",null,"内容预览:")],-1)),C("p",null,I(ge(i.row.content)),1)])]),_:1}),e(r(U),{label:"标题","min-width":"250",prop:"title","show-overflow-tooltip":""}),e(r(U),{label:"作者",prop:"authorName",width:"120"}),e(r(U),{label:"板块/分类",prop:"forumType",width:"120"}),e(r(U),{label:"状态",width:"180"},{default:l(i=>[i.row.isTop?(v(),z(r(R),{key:0,size:"small",style:{"margin-right":"5px"},type:"danger"},{default:l(()=>t[18]||(t[18]=[d(" 置顶 ")])),_:1})):D("",!0),i.row.isEssence?(v(),z(r(R),{key:1,size:"small",style:{"margin-right":"5px"},type:"warning"},{default:l(()=>t[19]||(t[19]=[d(" 加精 ")])),_:1})):D("",!0),i.row.status===0?(v(),z(r(R),{key:2,size:"small",type:"info"},{default:l(()=>t[20]||(t[20]=[d(" 禁用/锁定 ")])),_:1})):i.row.status===1?(v(),z(r(R),{key:3,size:"small",type:"success"},{default:l(()=>t[21]||(t[21]=[d(" 正常 ")])),_:1})):(v(),z(r(R),{key:4,size:"small",type:"warning"},{default:l(()=>[d(" 未知("+I(i.row.status)+") ",1)]),_:2},1024))]),_:1}),e(r(U),{label:"浏览",prop:"viewCount",sortable:"",width:"80"}),e(r(U),{label:"点赞",prop:"likeCount",sortable:"",width:"80"}),e(r(U),{label:"评论",prop:"commentCount",sortable:"",width:"80"}),e(r(U),{label:"发布时间",prop:"createTime",width:"180"},{default:l(i=>[d(I(Ve(i.row.createTime)),1)]),_:1}),e(r(U),{fixed:"right",label:"操作",width:"280"},{default:l(i=>[e(r(S),{size:"small",onClick:O=>ye(i.row)},{default:l(()=>[d(I(i.row.isTop?"取消置顶":"置顶"),1)]),_:2},1032,["onClick"]),e(r(S),{size:"small",onClick:O=>we(i.row)},{default:l(()=>[d(I(i.row.isEssence?"取消加精":"加精"),1)]),_:2},1032,["onClick"]),e(r(S),{size:"small",onClick:O=>Ce(i.row)},{default:l(()=>[d(I(i.row.status===0?"解锁":"锁定"),1)]),_:2},1032,["onClick"]),e(r(S),{size:"small",type:"primary",onClick:O=>_e(i.row)},{default:l(()=>t[22]||(t[22]=[d(" 编辑 ")])),_:2},1032,["onClick"]),e(r(S),{size:"small",type:"danger",onClick:O=>be(i.row)},{default:l(()=>t[23]||(t[23]=[d(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[p,T.value]]),F.value>0?(v(),L("div",wt,[e(r(me),{"current-page":s.value,"onUpdate:currentPage":t[4]||(t[4]=i=>s.value=i),"page-size":V.value,"onUpdate:pageSize":t[5]||(t[5]=i=>V.value=i),"page-sizes":[10,20,50,100],total:F.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:fe,onCurrentChange:pe},null,8,["current-page","page-size","total"])])):D("",!0)]),_:1})]),_:1}),e(r($),{label:"板块管理",name:"categories"},{default:l(()=>[e(at,{onRefresh:b})]),_:1}),e(r($),{label:"评论管理",name:"comments"},{default:l(()=>[e(ft)]),_:1})]),_:1},8,["modelValue"]),e(r(de),{modelValue:_.value,"onUpdate:modelValue":t[11]||(t[11]=i=>_.value=i),"close-on-click-modal":!1,title:re.value,top:"5vh",width:"80%",onClose:ve},{footer:l(()=>[C("span",_t,[e(r(S),{onClick:t[10]||(t[10]=i=>_.value=!1)},{default:l(()=>t[24]||(t[24]=[d("取消")])),_:1}),e(r(S),{loading:E.value,type:"primary",onClick:ke},{default:l(()=>[d(I(re.value),1)]),_:1},8,["loading"])])]),default:l(()=>[e(r(J),{ref_key:"postFormRef",ref:h,model:u,rules:P.value,"label-width":"100px"},{default:l(()=>[e(r(A),{label:"标题",prop:"title"},{default:l(()=>[e(r(Y),{modelValue:u.title,"onUpdate:modelValue":t[7]||(t[7]=i=>u.title=i),placeholder:"请输入帖子标题"},null,8,["modelValue"])]),_:1}),e(r(A),{label:"板块/分类",prop:"forumId"},{default:l(()=>[e(r(X),{modelValue:u.forumId,"onUpdate:modelValue":t[8]||(t[8]=i=>u.forumId=i),loading:c.value,filterable:"",placeholder:"选择板块",style:{width:"100%"}},{default:l(()=>[(v(!0),L(Ae,null,Re(k.value,i=>(v(),z(r(q),{key:i.id,label:i.name,value:i.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),e(r(A),{label:"内容",prop:"content"},{default:l(()=>[C("div",Ct,[e(r($e),{"default-config":N,editor:w.value,mode:"default",style:{"border-bottom":"1px solid #ccc"}},null,8,["editor"]),e(r(Ge),{modelValue:u.content,"onUpdate:modelValue":t[9]||(t[9]=i=>u.content=i),"default-config":B,mode:"default",style:{height:"400px","overflow-y":"hidden"},onOnCreated:n},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),Dt=ee(ht,[["__scopeId","data-v-269e2e40"]]);export{Dt as default};
