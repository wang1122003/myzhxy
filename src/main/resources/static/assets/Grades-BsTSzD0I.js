import{_ as x,r as h,c as C,o as E,d as y,e as f,f as n,w as s,y as S,A as P,z as V,m as a,B,C as i,D as k,v as p,F as m,H as A,h as u,g as D,P as F}from"./index-gQMZQ2sp.js";/* empty css                   */import{f as M,g as j}from"./formatters-CFKJmp8n.js";import"./request-DfavLRg_.js";import"./api-endpoints-Ctc2JoQP.js";const z={class:"grades-container"},H={key:0,class:"summary-info"},I={name:"StudentGrades"},L=Object.assign(I,{setup(O){const d=h(!1),o=h([]),v=async()=>{d.value=!0;try{const t=await j({});o.value=t.data||[]}catch(e){console.error("获取成绩失败",e),F.error("获取成绩失败"),o.value=[]}finally{d.value=!1}},N=e=>e==null?0:e>=90?4:e>=80?3:e>=70?2:e>=60?1:0,w=C(()=>{let e=0,t=0;return o.value.forEach(r=>{var _;const l=(_=r.course)==null?void 0:_.credit,c=r.totalScore;if(l!=null&&l>0&&c!==null&&c!==void 0){const G=N(c);e+=l,t+=G*l}}),e===0?"N/A":(t/e).toFixed(2)}),b=e=>{if(e==null)return"-";const t=Number(e);return isNaN(t)?"-":t.toFixed(1)},T=e=>{if(e==null)return"info";const t=Number(e);return isNaN(t)?"info":t>=90?"success":t>=80?"primary":t>=70?"warning":t>=60?"info":"danger"};return E(async()=>{await v()}),(e,t)=>{const g=A;return f(),y("div",z,[n(a(D),{class:"grades-card"},{header:s(()=>t[0]||(t[0]=[u("div",{class:"page-header"},[u("span",null,"我的成绩")],-1)])),default:s(()=>[S((f(),V(a(B),{data:o.value,style:{width:"100%"},"empty-text":"暂无成绩记录"},{default:s(()=>[n(a(i),{label:"课程编号",prop:"course.courseCode",width:"150"}),n(a(i),{label:"课程名称",prop:"course.courseName","min-width":"200"}),n(a(i),{label:"学分",align:"center",width:"80",prop:"course.credit"}),n(a(i),{label:"成绩",align:"center",width:"100",prop:"totalScore"},{default:s(({row:r})=>[n(a(k),{type:T(r.totalScore)},{default:s(()=>[p(m(b(r.totalScore)),1)]),_:2},1032,["type"])]),_:1}),n(a(i),{align:"center",label:"录入时间",width:"180",prop:"updateTime"},{default:s(({row:r})=>[p(m(a(M)(r.updateTime)),1)]),_:1})]),_:1},8,["data"])),[[g,d.value]]),o.value.length>0?(f(),y("div",H,[u("span",null,[t[1]||(t[1]=u("strong",null,"平均绩点 (GPA):",-1)),p(" "+m(w.value),1)])])):P("",!0)]),_:1})])}}}),R=x(L,[["__scopeId","data-v-f527f790"]]);export{R as default};
